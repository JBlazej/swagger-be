{"version":3,"sources":["../src/router.js"],"names":["router","controllers","wrap","fn","catch","get","req","res","sendFile","__dirname","post","verifyJsonWebToken","user","userCreate","userSignIn","tattoo","tattooAll","tattooByAlbum","tattooByAlbumAndName","tattooFindImage","tattooCreate","tattooUploadNewImage","put","tattooModifyByName","delete","tattooDeleteById"],"mappings":";;;;;;AAAA;;AACA;;;;AACA;;;;AAEA,IAAMA,SAAS,sBAAf;AACA,IAAMC,cAAc,0BAAW,eAAX,CAApB;;AAEA;AACA,IAAMC,OAAO,SAAPA,IAAO;AAAA,SAAM;AAAA,WAAaC,+BAAYC,KAAZ,kDAAb;AAAA,GAAN;AAAA,CAAb;;AAEA;AACAJ,OAAOK,GAAP,CAAW,GAAX,EAAgB,UAACC,GAAD,EAAMC,GAAN,EAAc;AAAEA,MAAIC,QAAJ,CAAaC,YAAY,kBAAzB;AAA6C,CAA7E;;AAEA;AACAT,OAAOU,IAAP,CAAY,mBAAZ,EAAiCC,wBAAjC,EAAqDT,KAAKD,YAAYW,IAAZ,CAAiBC,UAAtB,CAArD;AACAb,OAAOU,IAAP,CAAY,mBAAZ,EAAiCR,KAAKD,YAAYW,IAAZ,CAAiBE,UAAtB,CAAjC;;AAEA;AACAd,OAAOK,GAAP,CAAW,iBAAX,EAA8BH,KAAKD,YAAYc,MAAZ,CAAmBC,SAAxB,CAA9B;AACAhB,OAAOK,GAAP,CAAW,oBAAX,EAAiCH,KAAKD,YAAYc,MAAZ,CAAmBE,aAAxB,CAAjC;AACAjB,OAAOK,GAAP,CAAW,0BAAX,EAAuCH,KAAKD,YAAYc,MAAZ,CAAmBG,oBAAxB,CAAvC;AACAlB,OAAOK,GAAP,CAAW,6BAAX,EAA0CH,KAAKD,YAAYc,MAAZ,CAAmBI,eAAxB,CAA1C;;AAEAnB,OAAOU,IAAP,CAAY,yBAAZ,EAAuCR,KAAKD,YAAYc,MAAZ,CAAmBK,YAAxB,CAAvC;AACApB,OAAOU,IAAP,CAAY,0BAAZ,EAAwCR,KAAKD,YAAYc,MAAZ,CAAmBM,oBAAxB,CAAxC;;AAEArB,OAAOsB,GAAP,CAAW,0BAAX,EAAuCpB,KAAKD,YAAYc,MAAZ,CAAmBQ,kBAAxB,CAAvC;;AAEAvB,OAAOwB,MAAP,CAAc,wBAAd,EAAwCtB,KAAKD,YAAYc,MAAZ,CAAmBU,gBAAxB,CAAxC;;kBAEezB,M","file":"router.js","sourcesContent":["import {Router} from 'express'\nimport requireDir from 'require-dir'\nimport {verifyJsonWebToken} from './services/auth'\n\nconst router = Router()\nconst controllers = requireDir('./controllers')\n\n// Source https://strongloop.com/strongblog/async-error-handling-expressjs-es7-promises-generators/#usinges7asyncawait\nconst wrap = fn => (...args) => fn(...args).catch(args[2])\n\n// HOME\nrouter.get('/', (req, res) => { res.sendFile(__dirname + '/page/index.html')})\n\n// USER\nrouter.post('/api/user/sign-up', verifyJsonWebToken, wrap(controllers.user.userCreate))\nrouter.post('/api/user/sign-in', wrap(controllers.user.userSignIn))\n\n// TATTOO\nrouter.get('/api/tattoo/all', wrap(controllers.tattoo.tattooAll))\nrouter.get('/api/tattoo/:album', wrap(controllers.tattoo.tattooByAlbum))\nrouter.get('/api/tattoo/:album/:name', wrap(controllers.tattoo.tattooByAlbumAndName))\nrouter.get('/api/tattoo/image/src/:name', wrap(controllers.tattoo.tattooFindImage))\n\nrouter.post('/api/tattoo/save-record', wrap(controllers.tattoo.tattooCreate))\nrouter.post('/api/tattoo/upload-image', wrap(controllers.tattoo.tattooUploadNewImage))\n\nrouter.put('/api/tattoo/modify/:name', wrap(controllers.tattoo.tattooModifyByName))\n\nrouter.delete('/api/tattoo/delete/:id', wrap(controllers.tattoo.tattooDeleteById))\n\nexport default router\n"]}