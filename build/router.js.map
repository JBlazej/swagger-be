{"version":3,"sources":["../src/router.js"],"names":["htmlPath","path","join","__dirname","router","controllers","wrap","fn","catch","get","req","res","sendFile","post","verifyJsonWebToken","user","userCreate","userSignIn","tattoo","tattooAll","tattooByAlbum","tattooByAlbumAndName","tattooFindImage","tattooCreate","tattooUploadNewImage","put","tattooModifyByName","delete","tattooDeleteById"],"mappings":";;;;;;AAAA;;AACA;;;;AACA;;AACA;;;;;;AAEA,IAAMA,WAAWC,eAAKC,IAAL,CAAUC,SAAV,EAAqB,YAArB,EAAmC,YAAnC,CAAjB;;AAEA,IAAMC,SAAS,sBAAf;AACA,IAAMC,cAAc,0BAAW,eAAX,CAApB;;AAEA;AACA,IAAMC,OAAO,SAAPA,IAAO;AAAA,SAAM;AAAA,WAAaC,+BAAYC,KAAZ,kDAAb;AAAA,GAAN;AAAA,CAAb;;AAEA;AACAJ,OAAOK,GAAP,CAAW,GAAX,EAAgB,UAACC,GAAD,EAAMC,GAAN,EAAc;AAAEA,MAAIC,QAAJ,CAAaZ,QAAb;AAAwB,CAAxD;;AAEA;AACAI,OAAOS,IAAP,CAAY,mBAAZ,EAAiCC,wBAAjC,EAAqDR,KAAKD,YAAYU,IAAZ,CAAiBC,UAAtB,CAArD;AACAZ,OAAOS,IAAP,CAAY,mBAAZ,EAAiCP,KAAKD,YAAYU,IAAZ,CAAiBE,UAAtB,CAAjC;;AAEA;AACAb,OAAOK,GAAP,CAAW,iBAAX,EAA8BH,KAAKD,YAAYa,MAAZ,CAAmBC,SAAxB,CAA9B;AACAf,OAAOK,GAAP,CAAW,oBAAX,EAAiCH,KAAKD,YAAYa,MAAZ,CAAmBE,aAAxB,CAAjC;AACAhB,OAAOK,GAAP,CAAW,0BAAX,EAAuCH,KAAKD,YAAYa,MAAZ,CAAmBG,oBAAxB,CAAvC;AACAjB,OAAOK,GAAP,CAAW,6BAAX,EAA0CH,KAAKD,YAAYa,MAAZ,CAAmBI,eAAxB,CAA1C;;AAEAlB,OAAOS,IAAP,CAAY,yBAAZ,EAAuCP,KAAKD,YAAYa,MAAZ,CAAmBK,YAAxB,CAAvC;AACAnB,OAAOS,IAAP,CAAY,0BAAZ,EAAwCP,KAAKD,YAAYa,MAAZ,CAAmBM,oBAAxB,CAAxC;;AAEApB,OAAOqB,GAAP,CAAW,0BAAX,EAAuCnB,KAAKD,YAAYa,MAAZ,CAAmBQ,kBAAxB,CAAvC;;AAEAtB,OAAOuB,MAAP,CAAc,wBAAd,EAAwCrB,KAAKD,YAAYa,MAAZ,CAAmBU,gBAAxB,CAAxC;;kBAEexB,M","file":"router.js","sourcesContent":["import {Router} from 'express'\nimport requireDir from 'require-dir'\nimport {verifyJsonWebToken} from './services/auth'\nimport path from 'path'\n\nconst htmlPath = path.join(__dirname, '../public/', 'index.html')\n\nconst router = Router()\nconst controllers = requireDir('./controllers')\n\n// Source https://strongloop.com/strongblog/async-error-handling-expressjs-es7-promises-generators/#usinges7asyncawait\nconst wrap = fn => (...args) => fn(...args).catch(args[2])\n\n// HOME\nrouter.get('/', (req, res) => { res.sendFile(htmlPath) })\n\n// USER\nrouter.post('/api/user/sign-up', verifyJsonWebToken, wrap(controllers.user.userCreate))\nrouter.post('/api/user/sign-in', wrap(controllers.user.userSignIn))\n\n// TATTOO\nrouter.get('/api/tattoo/all', wrap(controllers.tattoo.tattooAll))\nrouter.get('/api/tattoo/:album', wrap(controllers.tattoo.tattooByAlbum))\nrouter.get('/api/tattoo/:album/:name', wrap(controllers.tattoo.tattooByAlbumAndName))\nrouter.get('/api/tattoo/image/src/:name', wrap(controllers.tattoo.tattooFindImage))\n\nrouter.post('/api/tattoo/save-record', wrap(controllers.tattoo.tattooCreate))\nrouter.post('/api/tattoo/upload-image', wrap(controllers.tattoo.tattooUploadNewImage))\n\nrouter.put('/api/tattoo/modify/:name', wrap(controllers.tattoo.tattooModifyByName))\n\nrouter.delete('/api/tattoo/delete/:id', wrap(controllers.tattoo.tattooDeleteById))\n\nexport default router\n"]}